# Food Manager

Веб-приложение для планирования меню на неделю с автоматическим формированием списка покупок.

## Возможности

- **Каталог продуктов** — база из 150+ продуктов с пищевой ценностью и аллергенами
- **Рецепты** — 60+ рецептов с ингредиентами и пошаговыми инструкциями
- **Планирование меню** — выбор блюд на каждый день недели
- **Список покупок** — автоматическое формирование с суммированием количеств
- **Учёт калорий** — отслеживание дневной калорийности
- **Аллергии** — исключение продуктов с аллергенами пользователя

---

# Руководство пользователя

## Содержание

1. [Начало работы](#начало-работы)
2. [Продукты](#продукты)
3. [Рецепты](#рецепты)
4. [План питания](#план-питания)
5. [Список покупок](#список-покупок)
6. [Настройки](#настройки)

---

## Начало работы

### Регистрация и вход

1. Откройте приложение и нажмите **«Регистрация»**
2. Введите email и пароль
3. После регистрации вы автоматически войдёте в систему

### Навигация

В верхнем меню доступны разделы:
- **Рецепты** — каталог рецептов с поиском и фильтрами
- **Продукты** — база продуктов с пищевой ценностью
- **План питания** — планирование меню на неделю
- **Список покупок** — автоматически сформированный список
- **Настройки** — профиль, расчёт калорий, аллергии

---

## Продукты

### Просмотр каталога

Каталог содержит 150+ продуктов с информацией:
- Пищевая ценность (калории, белки, жиры, углеводы на 100г)
- Категория (овощи, мясо, крупы и т.д.)
- Единица измерения (граммы, миллилитры, штуки)
- Размер упаковки (для округления в списке покупок)
- Аллергены (молоко, яйца, глютен и т.д.)

### Добавление продукта

1. Перейдите в раздел **«Продукты»**
2. Нажмите **«Добавить продукт»**
3. Заполните обязательные поля:
   - **Название** — например, «Куриная грудка»
   - **Категория** — выберите из списка
4. Дополнительно укажите:
   - **Единица измерения** — граммы, миллилитры или штуки
   - **Граммов в штуке** — если продукт поштучный (яйца, яблоки)
   - **Размер упаковки** — для округления в списке покупок (например, 1000г для молока)
   - **Пищевая ценность** — калории, БЖУ на 100г
   - **Аллергены** — отметьте содержащиеся аллергены
   - **Всегда есть дома** — для продуктов, которые не нужно покупать (соль, специи)
5. Нажмите **«Создать продукт»**

### Редактирование продукта

1. Откройте карточку продукта
2. Нажмите **«Редактировать»**
3. Измените нужные поля
4. Нажмите **«Сохранить изменения»**

---

## Рецепты

### Поиск и фильтрация

На странице рецептов доступны:

**Поиск** — введите название рецепта в поисковую строку

**Фильтры:**
- **Приём пищи** — завтрак, обед, ужин, перекус
- **Кухня** — русская, итальянская, азиатская и др.
- **Время приготовления** — до 15 минут, до 30 минут, до 1 часа, до 2 часов
- **Сложность** — от «очень легко» до «очень сложно»
- **Диета** — вегетарианское, веганское

Активные фильтры отображаются как бейджи — нажмите ✕ чтобы убрать фильтр.

### Просмотр рецепта

Карточка рецепта содержит:
- Фото блюда (если добавлено)
- Время приготовления
- Количество порций
- Калорийность на порцию
- Сложность
- Теги (вегетарианское, веганское)

Нажмите на карточку для просмотра подробностей:
- Полный список ингредиентов с количеством
- Пошаговые инструкции
- Пищевая ценность на порцию

### Создание рецепта

1. Нажмите **«Добавить рецепт»**
2. Заполните основную информацию:
   - **Название** — например, «Борщ украинский»
   - **Описание** — краткое описание блюда
   - **Тип** — завтрак, обед, ужин, перекус
   - **Время** — подготовка, готовка, общее время
   - **Порции** — количество порций
   - **Сложность** — от 1 до 5

3. Добавьте ингредиенты:
   - Выберите продукт из каталога
   - Укажите количество и единицу измерения
   - Количество в граммах рассчитается автоматически
   - Отметьте опциональные ингредиенты

4. Добавьте шаги приготовления:
   - Опишите каждый шаг
   - Укажите время и температуру (опционально)

5. **Калорийность рассчитается автоматически** на основе ингредиентов

6. Нажмите **«Создать рецепт»**

### Редактирование рецепта

1. Откройте рецепт
2. Нажмите **«Редактировать»**
3. Измените нужные данные
4. Нажмите **«Сохранить»**

---

## План питания

### Создание плана

1. Перейдите в раздел **«План питания»**
2. Нажмите **«Новый план»**
3. Введите название (необязательно)
4. Выберите период одним из способов:
   - **Быстрый выбор**: нажмите кнопку «Эта неделя», «Следующая неделя», «2 недели» или «Месяц»
   - **Календарь**: нажмите на поле с датами и выберите диапазон в календаре
5. Нажмите **«Создать план»**

### Изменение периода плана

Вы можете изменить период уже созданного плана:
1. Откройте план
2. Нажмите на даты рядом с названием (они кликабельны)
3. Выберите новый диапазон в календаре
4. Нажмите **«Сохранить»**

**Примечание:** Рецепты, которые выходят за пределы нового периода, останутся в плане, но не будут отображаться.

### Добавление рецептов в план

1. Откройте созданный план
2. Нажмите на нужный день
3. В открывшемся окне выберите приём пищи:
   - Завтрак
   - Обед
   - Ужин
   - Перекус
4. Нажмите **«+ Добавить рецепт»**
5. Выберите рецепт из списка
6. Укажите количество порций
7. Повторите для других приёмов пищи

### Редактирование дня

В окне редактирования дня вы можете:
- Видеть все приёмы пищи сразу
- Изменять количество порций
- Удалять рецепты из плана
- Видеть калорийность каждого приёма пищи
- Видеть общую калорийность дня

### Копирование плана

Чтобы скопировать план одного дня в другие дни:
1. Откройте день, который хотите скопировать
2. Нажмите **«Копировать в другие дни»**
3. Выберите дни назначения
4. Выберите, заменить существующие записи или добавить к ним
5. Нажмите **«Копировать»**

### Отслеживание калорий

- Каждый приём пищи показывает сумму калорий
- Внизу дня отображается общая калорийность
- Прогресс-бар показывает процент от дневной нормы (2000 ккал)

---

## Список покупок

### Автоматическое формирование

Список покупок формируется автоматически на основе:
- Всех рецептов в текущем плане питания
- Количества порций каждого рецепта
- Пищевой ценности продуктов

### Группировка по категориям

Продукты группируются по категориям для удобства:
- Овощи
- Фрукты
- Мясо
- Рыба
- Молочные продукты
- Крупы
- И другие...

### Округление до упаковки

Если у продукта указан **размер упаковки**, количество округляется:
- Молоко (упаковка 1000г): 750г → 1000г (1 уп.)
- Рис (упаковка 500г): 350г → 500г (1 уп.)

### Отметка купленных продуктов

- Нажмите на чекбокс слева от продукта
- Отмеченные продукты перечёркиваются
- Прогресс-бар показывает процент купленных продуктов
- Состояние сохраняется в браузере

### Продукты «Всегда есть дома»

Продукты с пометкой «Всегда есть дома» (соль, специи):
- Автоматически отмечены как купленные
- Выделены серым цветом
- Не требуют покупки

### Исключение аллергенов

Если в настройках указаны ваши аллергии:
- Продукты с аллергенами отмечены предупреждением
- Показывается причина исключения

### Экспорт списка

Нажмите **«Экспорт»** и выберите формат:
- **Текст (.txt)** — для отправки в мессенджер
- **CSV (.csv)** — для Excel/Google Sheets
- **JSON (.json)** — для других приложений

### Копирование в буфер

Нажмите **«Копировать»** — список скопируется в буфер обмена для вставки в мессенджер или заметки.

---

## Настройки

### Профиль

В разделе **«Настройки»** вы можете:
- Изменить имя пользователя
- Изменить email
- Выйти из системы

### Расчёт дневной нормы калорий (ВАЖНО!)

Для точного отслеживания калорий **обязательно заполните параметры тела**:

| Параметр | Описание | Влияние на расчёт |
|----------|----------|-------------------|
| **Пол** | Мужской / Женский | Базовый метаболизм у мужчин выше на ~5-10% |
| **Дата рождения** | Для расчёта возраста | С возрастом метаболизм замедляется |
| **Вес (кг)** | Текущий вес | Основной фактор расчёта |
| **Рост (см)** | Ваш рост | Влияет на базовый метаболизм |
| **Уровень активности** | От сидячего до очень активного | Множитель для дневной нормы |

**Как работает расчёт:**

1. Вычисляется **базовый метаболизм (BMR)** по формуле Миффлина-Сан Жеора:
   - Мужчины: `BMR = 10 × вес + 6.25 × рост - 5 × возраст + 5`
   - Женщины: `BMR = 10 × вес + 6.25 × рост - 5 × возраст - 161`

2. BMR умножается на **коэффициент активности**:
   - Сидячий образ жизни: ×1.2
   - Лёгкая активность (1-3 раза/нед): ×1.375
   - Умеренная активность (3-5 раз/нед): ×1.55
   - Высокая активность (6-7 раз/нед): ×1.725
   - Очень высокая активность: ×1.9

3. Результат — ваша **дневная норма калорий (TDEE)**

**Пример:**
- Женщина, 30 лет, 65 кг, 165 см, умеренная активность
- BMR = 10×65 + 6.25×165 - 5×30 - 161 = 1370 ккал
- TDEE = 1370 × 1.55 = **2124 ккал/день**

**Использование:**
1. Перейдите в **«Настройки»**
2. Заполните все поля в разделе **«Параметры тела»**
3. Нажмите кнопку **«Рассчитать»** — система автоматически вычислит вашу норму
4. Или введите значение вручную в поле **«Дневная норма калорий»**
5. Нажмите **«Сохранить»**

После сохранения:
- В плане питания прогресс-бар будет показывать % от вашей нормы
- Вы сможете контролировать превышение или недобор калорий

### Аллергии

1. Перейдите в **«Настройки»**
2. В разделе **«Аллергии»** отметьте продукты, на которые у вас аллергия:
   - Молоко
   - Яйца
   - Рыба
   - Моллюски
   - Орехи
   - Арахис
   - Пшеница/Глютен
   - Соя
   - Кунжут
   - Сельдерей
   - Горчица
3. Нажмите **«Сохранить»**

После сохранения:
- В списке покупок продукты с аллергенами будут отмечены
- Вы получите предупреждение при выборе рецепта с аллергеном

### Тёмная тема

Нажмите на иконку солнца/луны в верхнем меню для переключения между светлой и тёмной темой.

---

## Горячие клавиши

| Клавиша | Действие |
|---------|----------|
| `/` | Фокус на поиск |
| `Esc` | Закрыть модальное окно |

---

## Часто задаваемые вопросы

### Как изменить количество порций в плане?

Откройте день в плане питания, найдите нужный рецепт и измените число в поле порций.

### Почему калории не совпадают с рецептом?

Калорийность в плане зависит от количества порций. Если указано 2 порции, калорийность удваивается.

### Как удалить рецепт из плана?

Откройте день, найдите рецепт и нажмите кнопку удаления (✕) рядом с ним.

### Можно ли использовать без регистрации?

Нет, для сохранения планов и настроек требуется регистрация.

### Как добавить свой продукт, которого нет в каталоге?

Перейдите в раздел **«Продукты»** → **«Добавить продукт»** и заполните информацию.

---

## Техническая информация

### Технологии

| Компонент | Технология |
|-----------|------------|
| Frontend | Next.js 16, React 19 |
| Стили | Tailwind CSS v4, shadcn/ui |
| База данных | SQLite (Prisma ORM) |
| Авторизация | NextAuth.js |
| Валидация | Zod |

### Установка для разработки

```bash
# Клонирование репозитория
git clone <repo-url>
cd food-manager

# Установка зависимостей
npm install

# Настройка базы данных
npx prisma generate
npx prisma db push
npx prisma db seed

# Запуск в режиме разработки
npm run dev
```

### Переменные окружения

Создайте файл `.env`:

```env
DATABASE_URL="file:./dev.db"
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"
```

### Команды

```bash
npm run dev      # Запуск dev сервера
npm run build    # Сборка для production
npm run test     # Запуск тестов
npm run lint     # Проверка кода
npx prisma studio # GUI для базы данных
```

---

## Лицензия

MIT
